<% if @rule.errors.any? %>
  $("#error_explanation_rule").html('<ul class="collection with-header"><li class="collection-header"><h4><%= j pluralize(@rule.errors.count, "error") %> prohibited this rule from being saved:</h4></li><% @rule.errors.full_messages.each do |msg| %><li class="collection-item"><%= j msg %></li><% end %></ul>');
<% else %>
  $("#error_explanation_rule").html('');
  $("#rules").append("<%= escape_javascript(render 'rules/rule', rule: @rule) %>");
  $("#new_rule").find(":input[type=text]").val("");
  Materialize.updateTextFields();
  $('.modal-trigger').leanModal();
  $('#<%= @group.id %>_rule_<%= @rule.id %> .collapsible-header').click();
<% end %>
